<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>New example · PDMP.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../assets/partial.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>PDMP.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" action="../search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../index.html">Introduction</a></li><li><a class="toctext" href="../aboutpdmp.html">About PDMP</a></li><li><span class="toctext">Examples</span><ul><li><a class="toctext" href="../examples/ex_gbps1.html">Global BPS</a></li><li><a class="toctext" href="../examples/ex_lbps1.html">Local BPS</a></li></ul></li><li><span class="toctext">Technical Documentation</span><ul><li><a class="toctext" href="../techdoc/structure.html">Code structure</a></li><li><a class="toctext" href="../techdoc/coretools.html">Core tools</a></li><li><a class="toctext" href="../techdoc/models.html">Models</a></li><li><a class="toctext" href="../techdoc/global.html">Global sampler</a></li><li><a class="toctext" href="../techdoc/local.html">Local sampler</a></li></ul></li><li><span class="toctext">Contributing</span><ul><li class="current"><a class="toctext" href="addingexample.html">New example</a><ul class="internal"><li><a class="toctext" href="#Syntax-for-the-example-1">Syntax for the example</a></li><li><a class="toctext" href="#Declaring-your-example-1">Declaring your example</a></li></ul></li><li><a class="toctext" href="addingfeature.html">New feature</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Contributing</li><li><a href="addingexample.html">New example</a></li></ul><a class="edit-page" href="https://github.com/alan-turing-institute/PDMP.jl/tree/814f1bd9f485e716a5ba44d355695688b1b161ac/docs/src/contributing/addingexample.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>New example</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Adding-an-example-1" href="#Adding-an-example-1">Adding an example</a></h1><p>Examples are a great way to showcase how to make use of a specific feature. We consider two types of examples:</p><ol><li><p>a simple example (running in &lt; 10 seconds)</p></li><li><p>a complex example (the complement of the first category)</p></li></ol><p>The first category is great as they can be used as <em>tests</em> and as documentation.</p><p>The process is somewhat automated here and essentially all you have to do is write the example in the test directory and comment it accordingly, we show this below.</p><h2><a class="nav-anchor" id="Syntax-for-the-example-1" href="#Syntax-for-the-example-1">Syntax for the example</a></h2><p>Let&#39;s say you have an example which can be run in a few seconds and uses a new feature. You can effectively use it as a unit test by itself. To respect conventions, please name your example <code>ex_NAME.jl</code> and put it in <code>test/</code>.</p><p>Start your code by</p><pre><code class="language-julia">using Base.Test</code></pre><p>Then a few markers should be considered:</p><ul><li><p><code>#@startexample NAME_OF_EXAMPLE</code> indicates that you start the code of the example proper, everything between that mark and the end flag will appear in the doc.</p></li><li><p>Encapsulates all the explanations you want to appear in markdown between <code>#=</code> and <code>=#</code>, all the other comments will be taken as part of the julia code and shown in code blocks.</p></li><li><p><code>#@endexample</code> to indicate that the example is finished</p></li><li><p>write a few tests that check that the example produces the right answer (unit test)</p></li></ul><p>So it should look like (a full example can be seen <a href="https://github.com/alan-turing-institute/PDMP.jl/blob/master/test/ex_gbps1.jl">here</a>)</p><pre><code class="language-julia">using Base.Test
#@startexample A simple example
#=
In this example we will show how to find the maximum over a collection of
random numbers in Julia for all the numbers that are *negative*.
=#
a = randn(500)
# we use a comprehension
m = maximum(a[i] for i in 1:length(a) if a[i]&lt;0)
#=
That&#39;s it!
=#
#@endexample
@test m &lt; 0.0</code></pre><p>Make sure the tests pass! This will generate the following markdown (see next point for the command that generates it):</p><pre><code class="language-markdown"># Name of the Test

In this example we will show how to find the maximum over a collection of
random numbers in Julia for all the numbers that are negative.
 ```julia
a = randn(500)
# we use a comprehension
m = maximum(a[i] for i in 1:length(a) if a[i]&lt;0)
 ```
That&#39;s it!</code></pre><p><em>Remark</em>, the spaces in front of the triple backticks in the markdown snippet above are not actually generated when you use <code>readexamples.jl</code>. The spaces are used here in order to escape these triple backticks so that the snippet does not end up being unduly fragmented in three pieces.</p><h2><a class="nav-anchor" id="Declaring-your-example-1" href="#Declaring-your-example-1">Declaring your example</a></h2><p>You have to mention your example in a few spots:</p><ul><li><p>in <code>test/runtests.jl</code>, add a line at the bottom following the examples already present i.e. something like <code>@testset &quot;ex_NAME&quot;    begin include(&quot;ex_NAME.jl&quot;) end</code> (make sure this passes!)</p></li><li><p>in <code>docs/src/make.jl</code>, add a line under <code>&quot;Examples&quot;</code> following the syntax of examples already present so something like: <code>&quot;Name of your expl&quot; =&gt; &quot;examples/ex_name_of_example.jl&quot;</code></p></li></ul><p>Finally, to generate the markdown run the following command (this will act for all the examples at once so it will also refresh any other modification you may have added to other examples):</p><pre><code class="language-none">julia docs/readexamples.jl</code></pre><footer><hr/><a class="previous" href="../techdoc/local.html"><span class="direction">Previous</span><span class="title">Local sampler</span></a><a class="next" href="addingfeature.html"><span class="direction">Next</span><span class="title">New feature</span></a></footer></article></body></html>
